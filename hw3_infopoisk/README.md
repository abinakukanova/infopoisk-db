# Домашнее задание 2

Вас ждут 3 задания и 1 дополнительный вопрос. Для выполнения заданий понадобится навык чтения схем БД, написания запросов (по мотивам пар 5-8), а также чтения документации. Для написания запросов нужно использовать **диалект MySQL**.

Разбалловка представлена рядом с названиями заданий. Если все выполнено правильно, то Вы получаете полный балл. Если задание выполнено с ошибками, то Вы получаете половину балла. Если задание сделано, но с критическими ошибками (запрос не отвечает поставленной задаче или в целом не работает), то за задачу ставится 0 баллов. Настоятельно рекомендую сделать игрушечные таблицы у себя и протестировать Ваши запросы.

## Ремарка
На парах мы работали с разными диалектами. Домашнее задание же необходимо сделать на диалекте MySQL, который имеет несколько интересных особенностей в части разработки пользовательских процедур и функций.

### `DELIMITER`
Первая особенность заключается в том, что MySQL может путать окончания инструкций и программных процедур. Для того чтобы избежать ошибок, необходимо в начале процедуры или функции прописать инструкцию `DELIMITER` и обозначить, каким разделителем она будет оканчиваться.

``` sql
DELIMITER $$
```

Почитать: https://stackoverflow.com/questions/10259504/delimiters-in-mysql

### `DETERMINISTIC`
Данная инструкция говорит о том, что функция, запущенная с определённым параметром, будет каждый раз возвращать одно и то же значение. Этот или другие параметры, касающиеся поведения функции, необходимо прописать после инструкции `RETURNS datatype`

``` sql
RETURNS datatype DETERMINISTIC
```

Почитать: https://stackoverflow.com/questions/7946553/deterministic-function-in-mysql

**Также**

### NN, UQ
В схемах есть обозначения NN -- это означает, что колонка не позволяет вставлять нулевые значения. UQ -- сокращение от Unique -- колонка с уникальными значениями.

Успехов!

# Задания

## Фильмы (1 балл)
Дана схема:

<image src="./films.png" alt="films">

Напишите запрос, который выведет имена всех актёров, снимавшихся в фильме "Маска" ("The Mask").

## Каршеринг (1 балл)
Дана схема:

<image src="./carsharing.png" alt="carsharing">

Необходимо написать запрос, который выведет информацию обо всех имеющихся машинах в базе данных и их статусе.

## Сотрудники (5 баллов)
Дана схема:

<image src="./employees.png" alt="employees">

### Запрос (2 балла)
Напишите запрос, который выдаст имена сотрудников из каждого отдела, зарплата которых выше средней в отделе (2 балла).

### Процедура (2 балла)
1) Напишите процедуру `get_department_info`, которая отобразит данные о количестве сотрудников по департаментам, имеющих зарплату больше указанной цифры входного параметра. Входной параметр назовите `salary_value`. Напишите код вызова процедуры с любым значением входного параметра (1 балл)
2) Представьте ситуацию: в одном из департаментов числится один сотрудник, и его зарплата оказывается меньше заданного параметра. Как поведёт себя написанный Вами запрос? Напоминаю, что нужна информация о количестве сотрудников в каждом департменте. Если запрос что-то не обрабатывает, попробуйте придумать, как это исправить (1 балл)

### Функция (1 балл)
1) Напишите функцию `get_salary_info`, которая будет возвращать суммарную зарплату по отделу, который укажет пользователь. Входной параметр назовите `department_value`, выходной -- `salary_value`. Напишите код вызова функции с любым значением входного параметра (1 балл)

## Дополнительный вопрос (2 балла)
Мы говорили о том, что SQL процедуры -- это именованный набор операций, который обычно ничего не возвращает. Так ли это в контексте диалекта MySQL? Если нет, то найдите способ и опишите его словами или приведите пример (2 балла)

## Оформление (1 балл)
Базово нужно сдать запросы либо кодом в ячейках md-файла задания, либо в отдельном файле с расширением `.sql`.

За дополнительный балл можно оформить код так же, как это предполагается в проекте: подключение к MySQL с помощью Python-коннектора и совершение каких-то действий с помощью курсора. Можно использовать тетрадки `.ipynb`

Файл с домашним заданием назовите `hw2_lastname`
